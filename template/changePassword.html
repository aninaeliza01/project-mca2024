{% extends "userBase.html" %}
{% block title %}profile{% endblock %}
{% block content %}
{% if messages %}
    {% for message in messages %}
        <div class="alert" role="alert">
            {{ message }}
        </div>
    {% endfor %}
{% endif %}
<form method="post" >
    {% csrf_token %}

    <label for="current_password">Current Password:</label>
    <input type="password" id="current_password" name="current_password" placeholder="Enter your current password" oninput="validateCurrentPassword()">
    <span id="currentPasswordError" class="error"></span><br>
    
    <label for="new_password">New Password:</label>
    <input type="password" id="new_password" name="new_password" placeholder="Enter your new password" oninput="validateNewPassword()">
    <span id="newPasswordError" class="error"></span><br>
    
    <label for="confirm_new_password">Confirm New Password:</label>
    <input type="password" id="confirm_new_password" name="confirm_new_password" placeholder="Confirm your new password" oninput="validateConfirmPassword()">
    <span id="confirmPasswordError" class="error"></span><br>
    
    <button type="submit" class="change-password-button">Change Password</button>
</form>
<script>
   function validateCurrentPassword() {
    var currentPasswordInput = document.getElementById("current_password");
    var currentPasswordValue = currentPasswordInput.value.trim();
    var currentPasswordError = document.getElementById("currentPasswordError");

    if (currentPasswordValue === "") {
        currentPasswordError.textContent = "Current password is required";
        currentPasswordError.style.color = "red";
        currentPasswordInput.classList.add("is-invalid");
        return false;
    }

    // Additional validation criteria for the current password can be added here.

    currentPasswordError.textContent = "";
    currentPasswordInput.classList.remove("is-invalid");
    return true;
}

function validateNewPassword() {
    var newPasswordInput = document.getElementById("new_password");
    var newPasswordValue = newPasswordInput.value.trim();
    var newPasswordError = document.getElementById("newPasswordError");

    // Add validation logic for the new password, such as minimum length, required characters, etc.

    // Example validation for minimum length:
    if (newPasswordValue.length < 8) {
        newPasswordError.textContent = "New password must be at least 8 characters";
        newPasswordError.style.color = "red";
        newPasswordInput.classList.add("is-invalid");
        return false;
    }

    // Additional validation criteria for the new password can be added here.

    newPasswordError.textContent = "";
    newPasswordInput.classList.remove("is-invalid");
    return true;
}

function validateConfirmPassword() {
    var newPasswordInput = document.getElementById("new_password");
    var confirmNewPasswordInput = document.getElementById("confirm_new_password");
    var confirmPasswordValue = confirmNewPasswordInput.value.trim();
    var confirmPasswordError = document.getElementById("confirmPasswordError");

    if (confirmPasswordValue === "") {
        confirmPasswordError.textContent = "Please confirm your new password";
        confirmPasswordError.style.color = "red";
        confirmNewPasswordInput.classList.add("is-invalid");
        return false;
    }

    if (newPasswordInput.value !== confirmPasswordValue) {
        confirmPasswordError.textContent = "New password and confirm password do not match";
        confirmPasswordError.style.color = "red";
        confirmNewPasswordInput.classList.add("is-invalid");
        return false;
    }

    confirmPasswordError.textContent = "";
    confirmNewPasswordInput.classList.remove("is-invalid");
    return true;
}
</script>
<style>
    .change-password-button {
    background-color: #3897f0;
    color: white;
    padding: 10px 20px;
    border: none;
    border-radius: 4px;
    font-size: 18px;
    cursor: pointer;
    margin-top: 10px;
}

.change-password-button:hover {
    background-color: #2763a3;
}
</style>
{% endblock content %}
